(()=>{var t={484:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",i="minute",o="hour",s="day",a="week",u="month",c="quarter",l="year",d="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},b={s:y,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,u),o=n-i<0,s=e.clone().add(r+(o?-1:1),u);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:l,w:a,d:s,D:d,h:o,m:i,s:r,ms:n,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",$={};$[g]=p;var w=function(t){return t instanceof O},v=function(t,e,n){var r;if(!t)return g;if("string"==typeof t)$[t]&&(r=t),e&&($[t]=e,r=t);else{var i=t.name;$[i]=t,r=i}return!n&&r&&(g=r),r||!n&&g},S=function(t,e){if(w(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new O(n)},x=b;x.l=v,x.i=w,x.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var O=function(){function p(t){this.$L=v(t.locale,null,!0),this.parse(t)}var y=p.prototype;return y.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(x.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(m);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},y.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},y.$utils=function(){return x},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(t,e){var n=S(t);return this.startOf(e)<=n&&n<=this.endOf(e)},y.isAfter=function(t,e){return S(t)<this.startOf(e)},y.isBefore=function(t,e){return this.endOf(e)<S(t)},y.$g=function(t,e,n){return x.u(t)?this[e]:this.set(n,t)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(t,e){var n=this,c=!!x.u(e)||e,f=x.p(t),m=function(t,e){var r=x.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return c?r:r.endOf(s)},h=function(t,e){return x.w(n.toDate()[t].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},p=this.$W,y=this.$M,b=this.$D,g="set"+(this.$u?"UTC":"");switch(f){case l:return c?m(1,0):m(31,11);case u:return c?m(1,y):m(0,y+1);case a:var $=this.$locale().weekStart||0,w=(p<$?p+7:p)-$;return m(c?b-w:b+(6-w),y);case s:case d:return h(g+"Hours",0);case o:return h(g+"Minutes",1);case i:return h(g+"Seconds",2);case r:return h(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(t){return this.startOf(t,!1)},y.$set=function(t,e){var a,c=x.p(t),f="set"+(this.$u?"UTC":""),m=(a={},a[s]=f+"Date",a[d]=f+"Date",a[u]=f+"Month",a[l]=f+"FullYear",a[o]=f+"Hours",a[i]=f+"Minutes",a[r]=f+"Seconds",a[n]=f+"Milliseconds",a)[c],h=c===s?this.$D+(e-this.$W):e;if(c===u||c===l){var p=this.clone().set(d,1);p.$d[m](h),p.init(),this.$d=p.set(d,Math.min(this.$D,p.daysInMonth())).$d}else m&&this.$d[m](h);return this.init(),this},y.set=function(t,e){return this.clone().$set(t,e)},y.get=function(t){return this[x.p(t)]()},y.add=function(n,c){var d,f=this;n=Number(n);var m=x.p(c),h=function(t){var e=S(f);return x.w(e.date(e.date()+Math.round(t*n)),f)};if(m===u)return this.set(u,this.$M+n);if(m===l)return this.set(l,this.$y+n);if(m===s)return h(1);if(m===a)return h(7);var p=(d={},d[i]=t,d[o]=e,d[r]=1e3,d)[m]||1,y=this.$d.getTime()+n*p;return x.w(y,this)},y.subtract=function(t,e){return this.add(-1*t,e)},y.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=x.z(this),o=this.$H,s=this.$m,a=this.$M,u=n.weekdays,c=n.months,l=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].substr(0,o)},d=function(t){return x.s(o%12||12,t,"0")},m=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:x.s(a+1,2,"0"),MMM:l(n.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,u,2),ddd:l(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:x.s(o,2,"0"),h:d(1),hh:d(2),a:m(o,s,!0),A:m(o,s,!1),m:String(s),mm:x.s(s,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:i};return r.replace(h,(function(t,e){return e||p[t]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,d,f){var m,h=x.p(d),p=S(n),y=(p.utcOffset()-this.utcOffset())*t,b=this-p,g=x.m(this,p);return g=(m={},m[l]=g/12,m[u]=g,m[c]=g/3,m[a]=(b-y)/6048e5,m[s]=(b-y)/864e5,m[o]=b/e,m[i]=b/t,m[r]=b/1e3,m)[h]||b,f?g:x.a(g)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return $[this.$L]},y.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=v(t,e,!0);return r&&(n.$L=r),n},y.clone=function(){return x.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},p}(),E=O.prototype;return S.prototype=E,[["$ms",n],["$s",r],["$m",i],["$H",o],["$W",s],["$M",u],["$y",l],["$D",d]].forEach((function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),S.extend=function(t,e){return t.$i||(t(e,O,S),t.$i=!0),S},S.locale=v,S.isDayjs=w,S.unix=function(t){return S(1e3*t)},S.en=$[g],S.Ls=$,S.p={},S}()},798:function(t,e,n){t=n.nmd(t),function(n,r){"use strict";var i={};n.PubSub=i,function(t){var e={},n=-1;function r(t,e,n){try{t(e,n)}catch(t){setTimeout(function(t){return function(){throw t}}(t),0)}}function i(t,e,n){t(e,n)}function o(t,n,o,s){var a,u=e[n],c=s?i:r;if(Object.prototype.hasOwnProperty.call(e,n))for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&c(u[a],t,o)}function s(t){var n=String(t);return Boolean(Object.prototype.hasOwnProperty.call(e,n)&&function(t){var e;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}(e[n]))}function a(t,e,n,r){var i=function(t,e,n){return function(){var r=String(t),i=r.lastIndexOf(".");for(o(t,t,e,n);-1!==i;)i=(r=r.substr(0,i)).lastIndexOf("."),o(t,r,e,n);o(t,"*",e,n)}}(t="symbol"==typeof t?t.toString():t,e,r);return!!function(t){for(var e=String(t),n=s(e)||s("*"),r=e.lastIndexOf(".");!n&&-1!==r;)r=(e=e.substr(0,r)).lastIndexOf("."),n=s(e);return n}(t)&&(!0===n?i():setTimeout(i,0),!0)}t.publish=function(e,n){return a(e,n,!1,t.immediateExceptions)},t.publishSync=function(e,n){return a(e,n,!0,t.immediateExceptions)},t.subscribe=function(t,r){if("function"!=typeof r)return!1;t="symbol"==typeof t?t.toString():t,Object.prototype.hasOwnProperty.call(e,t)||(e[t]={});var i="uid_"+String(++n);return e[t][i]=r,i},t.subscribeAll=function(e){return t.subscribe("*",e)},t.subscribeOnce=function(e,n){var r=t.subscribe(e,(function(){t.unsubscribe(r),n.apply(this,arguments)}));return t},t.clearAllSubscriptions=function(){e={}},t.clearSubscriptions=function(t){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&delete e[n]},t.countSubscriptions=function(t){var n,r,i=0;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)){for(r in e[n])i++;break}return i},t.getSubscriptions=function(t){var n,r=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&r.push(n);return r},t.unsubscribe=function(n){var r,i,o,s="string"==typeof n&&(Object.prototype.hasOwnProperty.call(e,n)||function(t){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t))return!0;return!1}(n)),a=!s&&"string"==typeof n,u="function"==typeof n,c=!1;if(!s){for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(i=e[r],a&&i[n]){delete i[n],c=n;break}if(u)for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&i[o]===n&&(delete i[o],c=!0)}return c}t.clearSubscriptions(n)}}(i),void 0!==t&&t.exports&&(e=t.exports=i),e.PubSub=i,t.exports=e=i}("object"==typeof window&&window||this)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";const t="fb9915cc52c6a75d11cc9ffd60bcb1e1";async function e(e,n,r){let i;i=null!=n?function(e,n){return`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${n}&appid=${t}`}(n,r):function(e){return`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${t}`}(e);const o=await fetch(encodeURI(i),{mode:"cors"}),s=await o.json();if(200!==s.cod)throw new Error(s.message);return s}function r(t){return`https://openweathermap.org/img/wn/${t}@2x.png`}function i(t){const e={};return e.timezone=t.timezone,e.dayUTC=t.dt,e.coord=t.coord,e.coord.name=t.name,e.main=t.main,e.wind_speed=t.wind.speed,e.cloudiness=t.clouds.all,e.weather=t.weather[0],e}function o(t){const e={};return e.dayUTC=t.dt,e.main={},e.main.temp=t.temp.day,e.main.temp_min=t.temp.min,e.main.temp_max=t.temp.max,e.weather=t.weather[0],e}function s(t,e){let n=0;return t===R.CELSIUS?n=e-273:t===R.FAHRENHEIT&&(n=1.8*(e-273)+32),Math.round(n)}function a(t){return Y.temperature_scale===R.CELSIUS?(e=t,s(R.CELSIUS,e)):Y.temperature_scale===R.FAHRENHEIT?function(t){return s(R.FAHRENHEIT,t)}(t):void 0;var e}function u(t){return`${a(t)}${Y.temperature_scale}`}function c(t,e){e.textContent=u(t)}const l=(t,e,n,r=null)=>{const i=document.createElement(t);return i.className=e,i.textContent=n,r&&r.appendChild(i),i};function d(t){for(;t.firstChild;)t.firstChild.remove()}const f=(t,e,n)=>{d(n);const r=u(t);l("i",e,null,n);const i=document.createTextNode(r);return n.appendChild(i),n},m=(()=>{const t=document.getElementById("city-name"),e=document.getElementById("city-lat"),n=document.getElementById("city-lon");return{setName:function(e){t.textContent=e},setLat:function(t){e.textContent=`LAT: ${t}`},setLon:function(t){n.textContent=`LON: ${t}`}}})(),h=(()=>{const t=document.getElementById("today-temp"),e=document.getElementById("today-temp-min"),n=document.getElementById("today-temp-max");return{setNowTemperature:function(e){c(e,t)},setMaxTemperature:function(t){f(t,"ti ti-temperature-plus",n)},setMinTemperature:function(t){f(t,"ti ti-temperature-minus",e)}}})(),p=(()=>{const t=document.getElementById("weather-today"),e=t.querySelector("img"),n=t.querySelector("figcaption");return{setImage:function(t,n){e.src=r(t),e.alt=n},setDescription:function(t){n.textContent=t}}})(),y=(()=>{const t=document.getElementById("more-info-temp-value"),e=document.getElementById("more-info-feels-like-value"),n=document.getElementById("more-info-tempmin-tempmax-value"),r=document.getElementById("more-info-humidity-value"),i=document.getElementById("more-info-pressure-value"),o=document.getElementById("more-info-wind-speed-value"),s=document.getElementById("more-info-cloudiness-value");return{setTemperature:function(e){c(e,t)},setFeelsLike:function(t){c(t,e)},setTempMinMax:function(t,e){const r=a(t),i=a(e);n.textContent=`${r}/${i} ${Y.temperature_scale}`},setHumidity:function(t){r.textContent=`${t}%`},setPressure:function(t){i.textContent=`${t} hPa`},setWindSpeed:function(t){o.textContent=`${t} m/s`},setCloudiness:function(t){s.textContent=`${t}%`}}})();var b=n(484),g=n.n(b);const $=document.getElementById("next-days"),w=(t,e,n,r)=>{const i=l("p",e,null,r);n?f(t,n,i):c(t,i)},v=t=>{const e=l("li","next-day",null,$);return(e=>{const n=l("div","next-day-resume-container",null,e);w(t.main.temp,"next-day-temp",null,n),((t,e,n)=>{const i=l("img","next-day-weather-image",null,n);i.src=r(t),i.alt=e})(t.weather.icon,t.weather.description,n),((t,e)=>{l("p","next-day-weather-desc",t,e)})(t.weather.description,n)})(e),(e=>{const n=l("div","next-day-temp-container",null,e);w(t.main.temp_min,"next-day-temp-min","ti ti-temperature-minus",n),w(t.main.temp_max,"next-day-temp-max","ti ti-temperature-plus",n)})(e),((t,e)=>{const n=new Date(1e3*t),r=g()(n).format("dddd");l("p","next-day-name",r,e)})(t.dayUTC,e),e};var S=n(798),x=n.n(S);const O="SETUP_WEATHER_BY_DATA",E="LOG_MESSAGE",M="BUILD_CURRENT_WEATHER",D="BUILD_NEXT_DAYS",_="INSERT_NEW_PROGRESS",T="FINISH_PROGRESS",I="CLOSE_PROGRESS";x().subscribe(M,(function(t,e){(function(t){const e=function(t){const e=t.getHours();return e>6&&e<18}(function(t,e=new Date){const n=e.getTime()+6e4*e.getTimezoneOffset();return new Date(n+1e3*t)}(t.timezone))?"day":"night";document.body.setAttribute("theme",e)})(e),function(t){m.setName(t.coord.name),m.setLat(t.coord.lat),m.setLon(t.coord.lon)}(e),function(t){h.setNowTemperature(t.main.temp),h.setMaxTemperature(t.main.temp_max),h.setMinTemperature(t.main.temp_min),p.setImage(t.weather.icon,t.weather.description),p.setDescription(t.weather.description)}(e),function(t){y.setTemperature(t.main.temp),y.setFeelsLike(t.main.feels_like),y.setTempMinMax(t.main.temp_min,t.main.temp_max),y.setHumidity(t.main.humidity),y.setPressure(t.main.pressure),y.setWindSpeed(t.wind_speed),y.setCloudiness(t.cloudiness)}(e)})),x().subscribe(D,(function(t,e){d($),(t=>{for(const e of t)v(e)})(e)}));const C=document.getElementById("log");let L;function A(t){const e=function(t){return t.className.includes("temp-select")||(t=t.parentNode),t}(t.target),n=e.getAttribute("data-config-temperature");n.toUpperCase()!==R.CELSIUS&&n.toUpperCase()!==R.FAHRENHEIT||Y.temperature_scale!==n.toUpperCase()&&(Y.temperature_scale=n.toUpperCase(),Array.from(H).filter((t=>t!==e)).forEach((t=>t.removeAttribute("selected"))),e.setAttribute("selected",""),Y.basicWeather&&x().publish(M,Y.basicWeather),Y.nextDaysWeather&&x().publish(D,Y.nextDaysWeather))}x().subscribe(E,(function(t,e){!function(t,e=6){C.className="show",C.textContent=t,L&&clearTimeout(L),L=setTimeout((()=>{C.className="",C.textContent=""}),1e3*e)}(e.message,e.seconds)}));const H=document.querySelectorAll(".temp-select.btn");H.forEach((t=>t.addEventListener("click",A)));const B=document.getElementById("search"),N=document.getElementById("search-form");N.addEventListener("submit",(function(t){t.preventDefault(),0!==B.value.length&&(Y.city&&B.value.toLowerCase()===Y.city.toLowerCase()?x().publish(E,{message:"Sorry, same city already is open."}):(x().publish(E,{message:"Loading city..."}),x().publish(O,{name:B.value}),N.reset()))}));let W=0;document.getElementById("config-reload").addEventListener("click",(function(){Y.city?(Date.now()-W)/1e3<30?x().publish(E,{message:"Too quickly, wait a moment and try again."}):(W=Date.now(),x().publish(E,{message:"Updating weather data..."}),x().publish(O,{name:Y.city})):x().publish(E,{message:"You need to choose one city first to reload."})}));const P=document.getElementById("load-progress");let U=[];function j(t){P.setAttribute("value",t),P.textContent=`${t}%`}function k(t,e){switch(t){case I:U.forEach((t=>clearTimeout(t))),U=[],j(0),P.classList.add("show");break;case T:setTimeout((()=>function(t){j(100),t&&P.classList.add("error");const e=setTimeout((()=>{j(0),P.classList.remove("show"),P.classList.remove("error")}),500);U.push(e)}(e.fail)),200);break;case _:setTimeout((()=>j(e.value)),200)}}x().subscribe(I,k),x().subscribe(T,k),x().subscribe(_,k);const R={CELSIUS:"ºC",FAHRENHEIT:"ºF"},Y={temperature_scale:R.CELSIUS,lang:"en_us",city:null,basicWeather:null,nextDaysWeather:null};async function F(n,r){let s;x().publish(I,{});try{s=r.lat?await async function(t,n){return i(await e(null,t,n))}(r.lat,r.lon):await async function(t){return i(await e(t))}(r.name),x().publish(_,{value:50})}catch(t){return x().publish(T,{fail:!0}),console.error(t),void x().publish(E,{message:"We cannot load your city request. Make sure that this city exists."})}return async function(e){return x().publish(M,e),x().publish(E,{message:"Weather loaded."}),x().publish(_,{value:80}),Y.basicWeather=e,Y.city=e.coord.name,async function(e,n){return function(t){const e=[];for(const n of t.daily)e.push(o(n));return e}(await async function(e,n){const r=`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${n}&exclude=minutely,hourly,alerts&appid=${t}`,i=await fetch(encodeURI(r),{mode:"cors"});return await i.json()}(e,n))}(e.coord.lat,e.coord.lon).then((t=>{x().publish(D,t),Y.nextDaysWeather=t,x().publish(_,{value:100}),x().publish(T,{fail:!1})})).catch((t=>{x().publish(T,{fail:!0}),console.error(t),x().publish(E,{message:"We cannot load weather for the next days. Sorry!"})})),!0}(s)}x().subscribe(O,F),x().publish(O,{name:"Brasilia"}),"geolocation"in navigator&&(x().publish(I,{}),x().publish(_,{value:10}),setTimeout((()=>x().publish(E,{message:"Accept Location prompt to we find your local weather"})),1e3),async function(){await navigator.geolocation.getCurrentPosition((function(t){x().publish(_,{value:50});const e={lat:t.coords.latitude,lon:t.coords.longitude};x().publish(O,e)}),(function(t){x().publish(T,{fail:!0}),x().publish(E,{message:`We cannot load your location, try find the weather searching by city name. Error code: ${t.code}`})}))}())})()})();